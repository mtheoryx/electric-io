{"version":3,"sources":["simulatedDevice.js"],"names":["simulatedDevice","receiver","id","telemetry","prototype","start","interval","setInterval","body","properties","forEach","prop","minmax","min","max","name","Math","random","annotations","Date","message","emitMessage","stop","clearInterval","module","exports"],"mappings":";;;;;;;;AAAA,SAASA,eAAT,CAAyBC,QAAzB,EAAmCC,EAAnC,EAAuCC,SAAvC,EAAkD;AAChD,OAAKF,QAAL,GAAgBA,QAAhB;AACA,OAAKC,EAAL,GAAUA,EAAV;AACA,OAAKC,SAAL,GAAiBA,SAAjB;AACD;;AAEDH,gBAAgBI,SAAhB,CAA0BC,KAA1B,GAAkC,YAAW;AAAA;;AAC3C,OAAKC,QAAL,GAAgBC,YAAY,YAAM;AAChC,QAAIC,OAAO,EAAX;AACA,UAAKL,SAAL,CAAeM,UAAf,CAA0BC,OAA1B,CAAkC,UAACC,IAAD,EAAU;AAAA,sDACvBA,KAAKC,MADkB;AAAA,UACnCC,GADmC;AAAA,UAC9BC,GAD8B;;AAE1CN,WAAKG,KAAKI,IAAV,IAAkBC,KAAKC,MAAL,MAAiBH,MAAMD,GAAvB,IAA8BA,GAAhD;AACD,KAHD;AAIA,QAAMK,cAAc;AAClB,qCAA+B,MAAKhB,EADlB;AAElB,6BAAuB,IAAIiB,IAAJ;AAFL,KAApB;AAIA,QAAMC,UAAU,EAACF,wBAAD,EAAcV,UAAd,EAAhB;;AAEA,UAAKP,QAAL,CAAcoB,WAAd,CAA0BD,OAA1B;AACD,GAbe,EAab,KAAKjB,SAAL,CAAeG,QAbF,CAAhB;AAcD,CAfD;;AAiBAN,gBAAgBI,SAAhB,CAA0BkB,IAA1B,GAAiC,YAAW;AAC1CC,gBAAc,KAAKjB,QAAnB;AACD,CAFD;;AAIAkB,OAAOC,OAAP,GAAiBzB,eAAjB","file":"simulatedDevice.js","sourcesContent":["function simulatedDevice(receiver, id, telemetry) {\n  this.receiver = receiver;\n  this.id = id;\n  this.telemetry = telemetry;\n}\n\nsimulatedDevice.prototype.start = function() {\n  this.interval = setInterval(() => {\n    var body = {};\n    this.telemetry.properties.forEach((prop) => {\n      const [min, max] = prop.minmax;\n      body[prop.name] = Math.random() * (max - min) + min;\n    });\n    const annotations = {\n      'iothub-connection-device-id': this.id,\n      'iothub-enqueuedtime': new Date()\n    };\n    const message = {annotations, body};\n\n    this.receiver.emitMessage(message);\n  }, this.telemetry.interval);\n}\n\nsimulatedDevice.prototype.stop = function() {\n  clearInterval(this.interval);\n}\n\nmodule.exports = simulatedDevice;\n"]}